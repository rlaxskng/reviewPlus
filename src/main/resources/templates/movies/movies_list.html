<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
                  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>ë¦¬ë·°í”ŒëŸ¬ìŠ¤</title>
    <link rel="stylesheet" href="/css/movies_list.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/scroll-to-top.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>ğŸ¬</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</head>
<style>
	#movie-categories-select{
		margin: 0 auto;
		max-width:1400px;
		height:60px;
	}
	
	#category-select{
		width:250px;
		height:50px;
		font-size:20px;
		text-align:center;
		border-radius: 10px;
		background-color:white;
		transition:background-color 0.2s;
	}
	
	#category-select:hover{
		background-color:#f0f0f0;
	}
	
</style>


<body>

<div th:insert = "index/index :: header"></div>

	<div id = "MovieList">
			<!-- ì˜í™” ì„ íƒ ì¹´í…Œê³ ë¦¬  -->
			<div id="movie-categories-select" style="margin-bottom: 20px;">
			    <select id="category-select">
			        <option value="now_playing">í˜„ì¬ìƒì˜</option>
			        <option value="popular">ì¸ê¸°</option>
			        <option value="top_rated">ìµœê³ í‰ì </option>
			        <option value="upcoming">ê°œë´‰ì˜ˆì •</option>
			    </select>
			</div>
			
		 <div id="movie-list2" class = "movie-list-container" th:attr="data-search-query=${searchQuery}"></div>
			<div id="loading-indicator2">
			    ì˜í™” ë¡œë“œ ì¤‘...
			</div>
	</div>
	<input type="hidden" id="searchQueryInput" th:value="${searchQuery}">
	
	
	<!-- í‘¸í„° -->
	<div th:insert="index/index :: footer"></div>
	<!-- ë§¨ìœ„ë¡œê°€ê¸° -->
	<button th:insert = "index/index :: scroll-to-top"></button>
 <script src ="/js/movies_list.js"></script>
 <script src ="/js/scroll-to-top.js"></script>
 
	<script th:inline="javascript">
	    // ì„œë²„ì˜ ê°’ì„ í• ë‹¹
	    currentCategory = '[[${selectedCategory}]]'; 
	    
	    //ì•ë’¤ "" ë”°ì˜´í‘œ ì œê±°
	    if (currentCategory.startsWith('"') && currentCategory.endsWith('"')) {
	        currentCategory = currentCategory.substring(1, currentCategory.length - 1);
	    }
	    
	    // ë§Œì•½ ì„œë²„ì—ì„œ ê°’ì´ ë„˜ì–´ì˜¤ì§€ ì•Šì•˜ë‹¤ë©´ (ì¦‰, '[[${selectedCategory}]]' ë¬¸ìì—´ ê·¸ëŒ€ë¡œ ë“¤ì–´ì™”ë‹¤ë©´)
	    if (currentCategory.startsWith('[[') || !currentCategory) {
	        currentCategory = 'popular';
	    }
	    console.log("ì´ˆê¸° ì¹´í…Œê³ ë¦¬ ì„¤ì • ì™„ë£Œ:", currentCategory);
	</script>

</body>
</html>
